# FIXED TEST COMMANDS FOR COMMAND PROMPT
# Copy and run these one by one in Command Prompt

# Test 1: Login with JSON data (FIXED)
python -c "import requests; import json; login_data={'username':'demo@crypto-portfolio.com','password':'DemoPass123!'}; r=requests.post('http://127.0.0.1:8000/api/auth/login', json=login_data); print(f'‚úÖ Login: {r.status_code}'); token=r.json().get('access_token') if r.status_code==200 else None; print('üé´ Token received!' if token else f'‚ùå Error: {r.text}'); globals().update({'token': token})"

# Test 2: Profile access with working token
python -c "import requests; import json; login_data={'username':'demo@crypto-portfolio.com','password':'DemoPass123!'}; r=requests.post('http://127.0.0.1:8000/api/auth/login', json=login_data); token=r.json().get('access_token'); headers={'Authorization': f'Bearer {token}'}; r2=requests.get('http://127.0.0.1:8000/api/auth/profile', headers=headers); print(f'‚úÖ Profile: {r2.status_code}'); print(f'User: {r2.json().get(\"email\")}' if r2.status_code==200 else f'‚ùå Error: {r2.text}')"

# Test 3: Portfolio (FIXED endpoint)
python -c "import requests; import json; login_data={'username':'demo@crypto-portfolio.com','password':'DemoPass123!'}; r=requests.post('http://127.0.0.1:8000/api/auth/login', json=login_data); token=r.json().get('access_token'); headers={'Authorization': f'Bearer {token}'}; r2=requests.get('http://127.0.0.1:8000/api/portfolio', headers=headers); print(f'‚úÖ Portfolio: {r2.status_code}'); print(f'Holdings count: {len(r2.json().get(\"holdings\", []))}' if r2.status_code==200 else f'‚ùå Error: {r2.text}')"

# Test 4: P&L Summary with working token
python -c "import requests; import json; login_data={'username':'demo@crypto-portfolio.com','password':'DemoPass123!'}; r=requests.post('http://127.0.0.1:8000/api/auth/login', json=login_data); token=r.json().get('access_token'); headers={'Authorization': f'Bearer {token}'}; r2=requests.get('http://127.0.0.1:8000/api/pnl/summary', headers=headers); print(f'‚úÖ P&L Summary: {r2.status_code}'); print(f'Portfolio Value: ${r2.json().get(\"total_portfolio_value\", 0)}' if r2.status_code==200 else f'‚ùå Error: {r2.text}')"

# Test 5: Trades with working token
python -c "import requests; import json; login_data={'username':'demo@crypto-portfolio.com','password':'DemoPass123!'}; r=requests.post('http://127.0.0.1:8000/api/auth/login', json=login_data); token=r.json().get('access_token'); headers={'Authorization': f'Bearer {token}'}; r2=requests.get('http://127.0.0.1:8000/api/trades', headers=headers); print(f'‚úÖ Trades: {r2.status_code}'); print(f'Trades count: {len(r2.json())}' if r2.status_code==200 else f'‚ùå Error: {r2.text}')"

# Test 6: Comprehensive endpoint test
python -c "import requests; import json; login_data={'username':'demo@crypto-portfolio.com','password':'DemoPass123!'}; r=requests.post('http://127.0.0.1:8000/api/auth/login', json=login_data); print(f'üîê Login: {r.status_code}'); if r.status_code==200: token=r.json().get('access_token'); headers={'Authorization': f'Bearer {token}'}; endpoints=[('/api/auth/profile','Profile'),('/api/portfolio','Portfolio'),('/api/pnl/summary','P&L'),('/api/trades','Trades')]; [print(f'üìä {name}: {requests.get(f\"http://127.0.0.1:8000{ep}\", headers=headers).status_code}') for ep,name in endpoints]"